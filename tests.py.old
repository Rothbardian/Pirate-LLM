# tests.py
from get_file_content import get_file_content

def test_lorem_truncate():
    text = get_file_content("calculator", "lorem.txt")
    assert text.endswith('truncated at 10000 characters]')
    assert len(text) <= 10000 + 100  # allow for the truncation message

def test_main_py():
    text = get_file_content("calculator", "main.py")
    # Should succeed if file exists and is <10000 characters
    assert not text.startswith("Error:")

def test_pkg_calculator_py():
    text = get_file_content("calculator", "pkg/calculator.py")
    assert not text.startswith("Error:")

def test_outside_working_dir():
    text = get_file_content("calculator", "/bin/cat")
    assert text.startswith('Error:')

def test_non_existent_file():
    text = get_file_content("calculator", "pkg/does_not_exist.py")
    assert text.startswith('Error:')

if __name__ == "__main__":
    test_lorem_truncate()
    test_main_py()
    test_pkg_calculator_py()
    test_outside_working_dir()
    test_non_existent_file()
    print("All tests passed.")
